---
title: Building pages
sidebar:
  order: 20
---

import { Aside, FileTree, Steps } from '@astrojs/starlight/components';

The publisher can work with almost any page builder as long as it outputs files in a pattern the publisher can match to [editions](/graphics-kit-publisher/sphinx/#editions) for the graphics server. (See [Config > Pack locations](/graphics-kit-publisher/config/packlocations/).)

## Directory-based pages

After being built, each page must reside in its own folder and be named `index.html`. For example, you cannot have `about.html`; instead, you should have `about/index.html`.

<FileTree>
- dist
  - about.html ❌ Not allowed!
</FileTree>

<FileTree>
- dist
  - about
    - **index.html** ✅ OK
</FileTree>

## Base paths

You'll likely want to specify a [base path](https://vite.dev/guide/build.html#public-base-path) for your pages in your page builder, which will let you build canonical link elements and fully specified paths to your static asses.


```html {3,4}
<html>
  <head>
    <link rel="canonical" href="https://www.reuters.com/graphics/.../">
    <link href="https://www.reuters.com/.../styles.css" rel="stylesheet">
  </head>
  <body></body>
</html>
```

<Aside>
The publisher **requires** pages have a canonical link element with the fully-specified URL where they will be published on reuters.com.
</Aside>

You can use the `getBasePath` utility to get the appropriate base path from URLs saved to your package.json by the publisher. The util takes a `mode` parameter you can use to get different base paths depending on the verion of the project you're building, either `dev`, `test`, `preview` or `prod`.

```javascript
// svelte.config.js
import { getBasePath } from '@reuters-graphics/graphics-kit-publisher';

const mode =
  process.env.PREVIEW ? 'preview'
  : process.env.NODE_ENV === 'production' ? 'prod'
  : 'dev';

const basePath = getBasePath(mode, { trailingSlash: false, rootRelative: true });
// e.g., "/graphics/ROOT-SLUG/WILD/asdjuspodfg"
const assetsPath = getBasePath(mode, 'my-assets', { trailingSlash: true, rootRelative: false });
// e.g., "https://www.reuters.com/graphics/ROOT-SLUG/WILD/asdjuspodfg/my-assets/"

/** @type {import('@sveltejs/kit').Config} */
const config = {
  kit: {
    paths: {
      base: basePath,
      assets: assetsPath
    },
  },
};

export default config;
```


### Preview pages

Before calling your [preview build script](/graphics-kit-publisher/config/build/#buildscripts), the publisher generates a unique URL and saves it to your `package.json`, which you can then use to satisfy page builders' base path requirements:

```json
// package.json
{
  "scripts": {
    "build:preview": "PREVIEW=true vite build"
  },
  "reuters": {
    "graphic": {
      "preview": "https://graphics.thomsonreuters.com/testfiles/2025/your-project/"
    }
  }
}
```

```javascript
import { getBasePath } from '@reuters-graphics/graphics-kit-publisher';

const basePath = getBasePath('preview');
// '/testfiles/2025/your-project'
```



### Production pages

You'll get base URLs from the graphics server for production pages.

The publisher saves these page URLs with other [pack metadata](/graphics-kit-publisher/package/) in your project's `package.json` after uploading [archives](/graphics-kit-publisher/sphinx/#archives) to the graphics server.

But the publisher also needs _to see_ your built files _to know_ which archives to upload. 

To get around this issue, the publisher may build your project _twice_. The first build will be without fully specifed base path URLs. That lets the publisher detect what archives need to be created by scanning your built files.

In short, the uploading process looks like this:

<Steps>
1. The publisher creates a [graphic pack](/graphics-kit-publisher/sphinx/#graphic-packs) in the graphics server.

2. Builds a version of the project without base path URLs.

3. Scans the built files to determine what [archives](/graphics-kit-publisher/sphinx/#archives) should be uploaded.

4. Uploads dummy files for any archives found to get a URL from the graphics server and saves those URLs to `package.json`.

5. Builds the production version of the project, which can now use the saved URLs to configure the project's base path and create canonical links in the built pages.

6. Updates the dummy archives in the graphics server with the real files.
</Steps>


## Preview images

[Interactive edition](/graphics-kit-publisher/sphinx/#interactive-editions) pages must have an image to represent them in the graphics server and on Reuters Connect.

If your image is included in the assets generated by your page builder (i.e., is not hosted somewhere else), you can include an `og:image` tag directly in the page:

```html {4}
<html>
  <head>
    <link rel="canonical" href="https://www.reuters.com/graphics/.../">
    <meta property="og:image" content="https://www.reuters.com/graphics/.../share.jpg" />
  </head>
  <body></body>
</html>
```

Alternatively, your page builder can output the image in the same directory as your page and name it either `_gfxpreview.png` or `_gfxpreview.jpg`.

<FileTree>
- dist
  - embeds
    - en
      - page
        - index.html
        - **_gfxpreview.jpg**
</FileTree>

<Aside>
Valid preview image types are `.jpg`, `.jpeg` or `.png`.
</Aside>